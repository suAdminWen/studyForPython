# 服务订购到期日

在真实的业务场景中，客户可以在任意一天订购我们的服务，订购周期可以是一个月、一个季度、半年或一年，在订购日后的这么多月后的凌晨 0 点订单到期。

以下举例说明订购的过期计算方式：

* 在 2016-11-10 订购一个月，订购将在 2016-12-10 过期
* 在 2017-01-30 订购一个月，订购将在 2017-02-28 过期
* 在 2017-01-31 订购三个月，订购将在 2017-04-30 过期
* 在 2017-04-30 订购一个月，订购将在 2017-05-30 过期



## 问题1（无需编程）an

假定我们每天可以收到 4 个订单，其中一个是一个月周期的，一个是一个季度周期的，一个是半年周期的，一个是一年周期的。这样的订单从很久以前，比如五年前就开始了。

请通过分析回答：在哪一天到期的订单会最多，有多少个？具体是哪几个订单？

并对分析过程进行解释。

### answer

平年的2月28日到期的订单会最多，共 12或13 个，分别是在以下日期订购的订单：

- 同一年的 1 月 28、29、30、31 日
- 上一年的 11 月 28、29、30 日
- 上一年的 8 月 28、29、30、31 日
- 上一年的 2 月 28 日，如果上一年为闰年还包括 2 月 29 日

一年之中所有的月份的天数分为28天、29天、30天、31天，而服务的订购周期是按照月为周期的，那么同是订购一个月的服务，但是具体得到服务的天数是不一样的。因为平年的2月总共28天，所以，订购服务周期本应该截至在2月29、30、31的服务都会在2月结束时结束，2月28日这一天到期的服务就会变成最多。


## 问题2

请实现一个方法，给定订购的年月日（y m d)，已知订购时长是一个月，返回订单的到期日。y m d 均为整数，保证是正确的日期。

* 在考虑我们的喜好（Python == Javascript > Java > C/C++）的基础上，选择你最擅长的语言，给出可执行的代码
* 主体函数避免使用系统库/第三方库。测试代码部分无限制。
* 需要包括至少 3 个测试数据。
* 简要解释一下实现思路以及解题过程中的一些思考过程。
* 请保证代码的正确性。

### answer

思路：因为服务是按照月周期来计算的，那么就不存在固定30天或31天方式。需要考虑的是，用户订购的服务下个月的实际天数来计算服务到期的日子。具体实现思路如下：

- 计算当前年份是否是闰年，因为闰年的2月份是29天，存在2月29到期的服务。
- 计算用户订购的时长，因为订购的周期可以为一个月、一个季度（3个月）、半年（6个月）和一年（12个月），最小时长为1个月，所以需要计算到期的那个月份的实际天数。
- 如果出现可跨年的周期，需要调整月份和年份的值。
- 计算到期月份的实际天数
- 计算到期的实际日期

具体代码实现见文件an2.py，run_test.py 为测试。

### 引申

获取用户订购服务的实际天数

